<ng-template #partyTemplate let-party>
    <!-- Maybe if head vote, groupby parties and collapse them open to see who voted -->
    <div class="party" [ngStyle]="highLighted.indexOf(party.ActorNaam) > -1 ? {order: 1} : {order: 2}">
        <div class="party-name"
            [ngClass]="{'mark' :highLighted.indexOf(party.ActorFractie) > -1, 'mistake':party.Vergissing}">
            {{party.ActorNaam}}
            <i *ngIf="this.result.StemmingsSoort == 'Hoofdelijk'">{{party.ActorFractie}}</i>
        </div>
        <span *ngIf="this.result.StemmingsSoort != 'Hoofdelijk'" class="size-hover">
            {{party.FractieGrootte}}
        </span>
    </div>
</ng-template>

<div class="component">
    <div class="result-card" [ngStyle]="collapsable && !collapsed? {height: maxSize + 'px', overflowY: 'clip'} : {}">
        <div class="case">
            <h3>{{result.Zaak[0].Titel}}</h3>
            <i>{{result.Zaak[0].Soort}}, </i> <small>{{votingResult}}</small>
            <p>{{result.Zaak[0].Onderwerp}}</p>
            <div class="link-date">
                <a class="link" target="_blank" [href]="getTKUrl()">{{result.Zaak[0].Nummer}}</a>
                <p class="date"><small class="text-muted">{{getLocalDate()}}</small></p>
            </div>
        </div>
        <div class="votes" #votes
            [ngStyle]="collapsable && !collapsed? {height: maxSize + 'px', overflowY: 'clip'} : {}">
            <div class="parties">
                <ng-template ngFor let-party [ngForOf]="yays">
                    <ng-container *ngTemplateOutlet="partyTemplate; context: { $implicit: party }"></ng-container>
                </ng-template>
            </div>
            <div class="voting-bar">
                <div class="bar-votes yay">{{votesYay}}</div>
                <div class="bar yays" [style]="{height: (votesYay/(votesYay + votesNay)* 100) + '%'}"> </div>
            </div>
            <div class="voting-bar">
                <div class="bar-votes nay"> {{votesNay}}</div>
                <div class="bar nays" [style]="{height: (votesNay/(votesYay + votesNay)* 100) + '%'}"> </div>
            </div>
            <div class="parties">
                <ng-template ngFor let-party [ngForOf]="nays">
                    <ng-container *ngTemplateOutlet="partyTemplate; context: { $implicit: party }"></ng-container>
                </ng-template>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="collapse" *ngIf="collapsable">
            <button (click)="toggleCollapse()">
                <div *ngIf="!collapsed">Laat meer zien</div>
                <div *ngIf="collapsed">Laat minder zien</div>
            </button>
        </div>
        <div class="share">
            <a target="_blank" [href]="'./resultaat/' + result.Zaak[0].Id + '?'+ getQueryParams()">Deel resultaat</a>
        </div>
    </div>
</div>