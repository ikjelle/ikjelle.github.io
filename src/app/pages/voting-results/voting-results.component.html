<div class="container-lg">
    <div class="intro">
        <h1>Tweede Kamer Stemmingsuitslagen</h1>
        Op deze pagina kunt u alle stemmingsuitslagen vinden die de 2e kamer heeft gedaan.
        <br>
        Deze resultaten kunt u filteren door onderstaand filter te gebruiken. Zo kunt u bijvoorbeeld makkelijk zien waar
        2 partijen afwijken van elkaar.

        <br>
        Alle resultaten worden opgehaald via de Opendate API van de Overheid
    </div>
    <hr>
    <div>
        <!-- The logic for grouping parties in boxes -->
        <div>
            <app-controversial [parties]="parties">
            </app-controversial>
        </div>
        <div>
            <label class="form-label">
                Selecteer de type zaken:
            </label>
            <div style="display: flex;flex-wrap: wrap;">
                <div class="form-check form-check-inline" style="order:-1000">
                    <input (change)="checkAllTypes($event)" [checked]="allTypesChecked()" class="form-check-input"
                        type="checkbox" id="selectAll" value="all">
                    <label class="form-check-label" for="selectAll">Alles (on)selecteren</label>
                </div>

                <div [style]="{order:-1*resultType.priority!}" *ngFor="let resultType of resultTypes; let i=index"
                    class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" [value]="resultType.name"
                        [checked]="resultType.checked" [id]="'inlineCheckbox'+ i"
                        (change)="changeTypeChecked(resultType)">
                    <label class="form-check-label" [for]="'inlineCheckbox'+ i">{{resultType.name}}</label>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-primary" (click)="filterResults()">Filter</button>
        </div>
    </div>
    <hr>
    <div #results>
        <div *ngIf="filterCount">Aantal resultaten: {{filterCount}}</div>
        <div>
            <div *ngFor="let page of pages; let i = index">
                <div *ngFor="let result of getResults(page.results); let j = index">
                    <app-result #result [highLighted]="highLighted" [result]="result">
                    </app-result>
                </div>
            </div>
        </div>
        <div *ngIf="this.nextPageUrl" class="d-flex justify-content-center">
            <button (click)="this.getNextPage()" class="btn btn-primary">Laad Meer Resultaten</button>
        </div>
    </div>
    <div *ngIf="spinner">
        <div class="spinner-border  m-5" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div *ngIf="!firstLoad">
            <app-cors-error></app-cors-error>
        </div>
    </div>
</div>