<div class="fcc gap">
    <div class="fcc gap">
        <h2>Verschillen tussen 2 Fracties</h2>
        Op deze pagina kunt u de periode kiezen en 2 fracties selecteren. Wanneer u daarna op de knop klikt, worden alle
        uitslagen opgehaald. Nadat de gegevens zijn opgehaald, kunt u per kamerstukdossier, een soort onderwerp, zien
        waar deze 2 partijen verschillend hebben gestemd.
        <br>
        Let op, het kan even duren voordat alles is opgehaald.
    </div>
    <hr style="width: 100%;">

    <app-period-picker [(start)]="periodStart" [(end)]="periodEnd"
        (update)="updateAvailableParties()"></app-period-picker>
    <div class="ffrwc gap">
        <div class="ffrwc l-gap">
            <div>Kies partij: </div>
            <div>
                <select class="party-select" (change)="setA($event)">
                    <option [selected]="partyAId== null" disabled>Kies een Partij</option>
                    <option [disabled]="p.Id == partyBId" [value]="p.Id" [selected]="p && p.Id==partyAId"
                        *ngFor="let p of parties">{{p.Afkorting}}</option>
                </select>
            </div>
        </div>
        <div class="ffrwc l-gap">
            <div>Kies partij: </div>
            <div>
                <select class="party-select" (change)="setB($event)">
                    <option [selected]="partyBId== null" disabled>Kies een Partij</option>
                    <option [disabled]="p.Id == partyAId" [value]="p.Id" [selected]="p.Id==partyBId"
                        *ngFor="let p of parties">{{p.Afkorting}}</option>
                </select>
            </div>
        </div>
    </div>
    <app-collapse [title]="'Type zaken'">
        <app-case-type-picker></app-case-type-picker>
    </app-collapse>
    <div class="frc">
        <button [disabled]="!(partyAId && partyBId)" [ngClass]="{'btn-disabled': !(partyAId && partyBId)}"
            class="btn btn-prim" (click)="getDifferences()">Laat verschillen
            zien.</button>
    </div>

    <app-cors-error *ngIf="parties.length == 0"></app-cors-error>
    <div class="fcc" style="padding:8px" *ngIf="totalCount || polling">
        <div *ngIf="totalCount" class="frc">
            Totaal aantal zaken met verschil: {{totalCount}}
        </div>
        <div class="frc" *ngIf="totalCasesNoDifference">Totaal aantal zaken behandeld door de 2e kamer:
            {{totalCasesNoDifference}} (Met de huidige filters)
        </div>
        <div class="fcc" *ngIf="polling">
            <div class="frc">Bezig met ophalen, data opgehaald: {{retrievedCount}}/{{totalCount}}</div>
            <app-loading-spinner></app-loading-spinner>
        </div>
    </div>

    <div class="ffrwc" style="padding:8px">
        <div class="fcc" style="width: 100%; margin-bottom: 8px;" [style]=" {order:-1*k.value.decisions.length}"
            *ngFor="let k of data | keyvalue">
            <app-collapse>
                <div class="fc" id="title">
                    <div style="align-self: flex-start; text-align: left;">
                        {{k.value.caseSubject.Titel}}: {{k.value.decisions.length}}
                    </div>
                    <div style="align-self: flex-end;" class="fr l-gap">
                        <div>Aantal Voor stemmen: </div>
                        <div>{{this.getPartyName(this.usedPartyAId)}}</div>
                        <div>
                            {{this.getNumberOfSided(true, this.usedPartyAId, k.value.decisions)}}
                            -
                            {{this.getNumberOfSided(false, this.usedPartyAId, k.value.decisions)}}
                        </div>
                        <div> {{this.getPartyName(this.usedPartyBId)}}</div>
                    </div>
                </div>
                <div class="fc" style="gap: 4px;">
                    <app-collapse *ngFor="let d of k.value.decisions" [title]="getTitle(d)">
                        <app-result [highLighted]="getHighLighted()" [result]="d"></app-result>
                    </app-collapse>
                </div>
            </app-collapse>
        </div>
    </div>
</div>